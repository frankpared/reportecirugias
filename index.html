<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador de Reportes de Cirugía Districorr</title>
  <link rel="icon" href="https://i.imgur.com/aA7RzTN.png" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&family=Lato&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>

<body>
  <div class="container">
    <header>
      <img src="https://i.imgur.com/aA7RzTN.png" alt="Logo Districorr" style="max-height: 90px; display: block; margin: 0 auto;" />
      <h4 class="text-primary font-weight-bold">Generador de Reportes de Cirugía Districorr</h4>
    </header>

    <div class="form-group">
      <label>Formato de Texto</label>
      <select id="formato" class="form-control">
        <option value="formal">Formal</option>
        <option value="moderno">Moderno</option>
        <option value="casual">Detallado</option>
      </select>
      <small class="ayuda-texto">Seleccione el estilo de redacción del reporte</small>
    </div>

    <div class="form-group">
      <label>Mensaje de Inicio</label>
      <select id="mensajeInicio" class="form-control">
        <option>Estimados, Adjunto detalles de la cirugía programada</option>
        <option>Estimados, Informo novedades de la cirugía programada</option>
        <option>Equipo, adjunto detalle de cirugía para logística y coordinación</option>
      </select>
      <small class="ayuda-texto">Elija cómo comenzará el mensaje</small>
    </div>

    <div class="form-group">
      <label>Paciente</label>
      <input id="paciente" class="form-control" required />
      <small class="ayuda-texto">Nombre completo del paciente</small>
      <div class="mensaje-error" id="error-paciente">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Médico</label>
      <input id="medico" class="form-control" list="medicosList" placeholder="Escriba o seleccione..." required />
      <datalist id="medicosList"></datalist>
      <small class="ayuda-texto">Seleccione o escriba el nombre del médico</small>
      <div class="mensaje-error" id="error-medico">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Instrumentador</label>
      <input id="instrumentador" class="form-control" list="instrumentadoresList" placeholder="Escriba o seleccione..." />
      <datalist id="instrumentadoresList"></datalist>
      <small class="ayuda-texto">Nombre del instrumentador quirúrgico</small>
    </div>

    <div class="form-group">
      <label>Lugar de Cirugía</label>
      <input id="lugarCirugia" class="form-control" list="lugaresList" placeholder="Escriba o seleccione..." required />
      <datalist id="lugaresList"></datalist>
      <small class="ayuda-texto">Hospital o clínica donde se realizará la cirugía</small>
      <div class="mensaje-error" id="error-lugar">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Fecha de Cirugía</label>
      <input type="date" id="fechaCirugia" class="form-control" required />
      <small class="ayuda-texto">Fecha programada para la intervención</small>
      <div class="mensaje-error" id="error-fecha">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Tipo de Cirugía</label>
      <input id="tipoCirugia" class="form-control" list="tiposCirugiaList" placeholder="Tipo de cirugía" required />
      <datalist id="tiposCirugiaList"></datalist>
      <small class="ayuda-texto">Ejemplo: Artroscopia de rodilla, Reemplazo de cadera</small>
      <div class="mensaje-error" id="error-tipo">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Material Requerido</label>
      <textarea id="material" class="form-control" rows="3" placeholder="Ingrese un ítem por línea" required></textarea>
      <small class="ayuda-texto">Lista de materiales necesarios para la cirugía</small>
      <div class="mensaje-error" id="error-material">Este campo es requerido</div>
    </div>

    <div class="form-group">
      <label>Observaciones</label>
      <textarea id="observaciones" class="form-control" rows="3"></textarea>
      <small class="ayuda-texto">Consideraciones especiales para el procedimiento</small>
    </div>

    <div class="form-group">
      <label>Información Adicional</label>
      <textarea id="infoAdicional" class="form-control" rows="3"></textarea>
      <small class="ayuda-texto">Otros datos relevantes para el equipo</small>
    </div>

    <div class="text-center">
      <button onclick="generarTexto()" class="btn-primario">📝 Generar Texto</button>
      <button onclick="copiarTexto()">📋 Copiar y Guardar</button>
      <button onclick="compartirWhatsApp()">📲 Enviar WhatsApp</button>
      <button onclick="enviarPorEmail()">✉️ Enviar Email</button>
      <button onclick="imprimirReporte()">🖨️ Imprimir / PDF</button>
      <button onclick="generarImagen()">🖼️ Guardar como Imagen</button>
      <a href="admin.html" class="btn-link">📁 Ver Reportes</a>
      <button onclick="verEstadisticas()">📊 Ver Estadísticas</button>
    </div>

    <div id="resultado-container" style="display: none;"></div>

    <small class="credit">By Responsable de Sistemas Franco Pared – Districorr ®</small>
  </div>

  <div id="toast" style="display:none;position:fixed;bottom:20px;right:20px;background:#28a745;color:#fff;padding:10px 20px;border-radius:8px;box-shadow:0 0 10px #0005;">✅ Reporte generado correctamente</div>

  <script src="script.js"></script>
</body>
</html>
